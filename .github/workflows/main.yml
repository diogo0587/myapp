- name: Set up Java 11
  uses: actions/setup-java@v4
  with:
    distribution: temurin
    java-version: '11'

- name: Set up Flutter
  uses: subosito/flutter-action@v2
  with:
    flutter-version: 'stable'

- name: Cache pub & Gradle
  uses: actions/cache@v4
  with:
    path: |
      ~/.pub-cache
      ~/.gradle/caches
      ~/.gradle/wrapper
    key: ${{ runner.os }}-flutter-${{ hashFiles('**/pubspec.yaml') }}

- name: Install dependencies
  run: flutter pub get

- name: Build debug APK
  run: flutter build apk --debug

- name: Upload debug APK artifact
  uses: actions/upload-artifact@v4
  with:
    name: app-debug-apk
    path: build/app/outputs/flutter-apk/*.apk
